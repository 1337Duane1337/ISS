{% load staticfiles %}

<!doctype html>
<html>
  <head>
    <title>
      {% block title %}
        {% block page_name %}{% endblock %}
        {{ config.forum_name }}
      {% endblock %}
    </title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <link rel="stylesheet" href="{% static "css/combined.css" %}">
    {% block css %} {% endblock %}

    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  </head>
  <body>
    <div class="page-content">
      <a href="/">
        <img src="{% static banner %}" class="banner" >
      </a>

      <div class="user-controls">
        <h3>User Controls</h3>

        <div class="user-controls-content">
          <ul class="control-links">
            <li>
              <a href="{% url 'latest-threads' %}">Latest Threads</a>
            </li>


            {% if user.is_authenticated %}
              <li>
                <a href="{% url 'inbox' %}">Inbox</a>
              </li>

              <li>
                <form method="POST" action="{% url 'logout' %}">
                  {% csrf_token %}
                  <input type="submit" value="Logout">
                  <input type="hidden" name="next"
                         value="{{ request.get_full_path }}">
                </form>
              </li>
            {% else %}
              <li>
                <a href="{% url 'register' %}">Register</a>
              </li>
            {% endif %}
          </ul>

          {% if user.is_authenticated %}
            <div class="welcome-block">
              <span>
                Welcome, <a href="{{ user.get_url }}">{{ user.username }}</a>
              </span>
            </div>

          {% else %}
            <form class="inline-login" action="{% url 'login' %}" method="POST">
              <div class="fields">
                {{ login_form.as_p }}
                {% csrf_token %}
                <input type="hidden" name="next" value="{{ request.get_full_path }}">
              </div>
              <input type="submit" value="Login" />
            </form>
          {% endif %}
        </div>
      </div>

      {% block navigation %}
        <div class="breadcrumb">
          <h3>Navigation</h3>

          <div class="crumbs">
            <a class="crumb" href="{% url "forum-index" %}">
              {{ config.forum_name }}
            </a>

            {% block breadcrumb %}
            {% endblock %}
          </div>
        </div>
      {% endblock %}

      {% block content %}
        Base Template.
      {% endblock %}

      <footer class="page-footer">
        Oldschool forum software, made with &#127866;, in space.
        <a href="https://github.com/RyanJenkins/ISS">Fork me hard baby.</a>
      </footer>
    </div>

    {% block js %}
    {% endblock %}
  </body>
</html>
